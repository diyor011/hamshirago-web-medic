# V1 ‚Äî –ß—Ç–æ –µ—Å—Ç—å –≤ –±—ç–∫–µ–Ω–¥–µ, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –≤–µ–±–∞—Ö

> –ë—ç–∫–µ–Ω–¥ —É–∂–µ –≥–æ—Ç–æ–≤. –ù–∏–∂–µ ‚Äî —Å–ø–∏—Å–æ–∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—ç–∫–µ–Ω–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç,
> –Ω–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`web/` –∏ `web-medic/`) –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç.

---

## 1. Web Push (VAPID) ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä

**–°—Ç–∞—Ç—É—Å:** –ë—ç–∫–µ–Ω–¥ ‚úÖ | web/ ‚úÖ | web-medic/ ‚úÖ

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –æ–±–æ–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

### web/ (–∫–ª–∏–µ–Ω—Ç)
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –°—Ç–∞—Ç—É—Å |
|----------|-------|--------|
| `GET /auth/vapid-public-key` | GET | ‚úÖ |
| `POST /auth/web-push-subscription` | POST | ‚úÖ |
| `DELETE /auth/web-push-subscription` | DELETE | ‚úÖ |

### web-medic/ (–º–µ–¥–∏–∫)
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –°—Ç–∞—Ç—É—Å |
|----------|-------|--------|
| `GET /auth/vapid-public-key` | GET | ‚úÖ |
| `POST /medics/web-push-subscription` | POST | ‚úÖ |
| `DELETE /medics/web-push-subscription` | DELETE | ‚úÖ |

**sw.js** –≤ web-medic: `requireInteraction: true` (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–∞–º–æ), URL —Ä–µ–º–∞–ø–∏–Ω–≥ `/orders/` ‚Üí `/order/`.
**WebPushInit** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á—ë–Ω –≤ layout ‚Äî –∞–≤—Ç–æ–ø–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏.
**VAPID_PUBLIC_KEY, VAPID_PRIVATE_KEY, VAPID_SUBJECT** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ Railway ‚úÖ

---

## 2. Telegram Chat ID ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

**–°—Ç–∞—Ç—É—Å:** –ë—ç–∫–µ–Ω–¥ ‚úÖ | web-medic/ ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

`telegram_chat_id` —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏ –≤ `localStorage`, –∏ –≤ –ë–î –Ω–∞ –±—ç–∫–µ–Ω–¥–µ.

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

```
PATCH /medics/telegram-chat-id
Body: { "chatId": "123456789" }
Guard: MedicAuthGuard
```

–í `web-medic/app/profile/page.tsx` –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ `?chatid=` –∏–∑ Telegram-–±–æ—Ç–∞:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage`
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `medicApi.telegram.saveChatId(chatId)` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
- –ë—ç–∫–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–¥–∏–∫—É –ø—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

---

## 3. Expo Push Token ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** –ë—ç–∫–µ–Ω–¥ ‚úÖ | web/ ‚ûñ –Ω–µ –Ω—É–∂–Ω–æ | web-medic/ ‚ûñ –Ω–µ –Ω—É–∂–Ω–æ

–≠—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –±—É–¥—É—â–µ–≥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (React Native / Expo).
–í –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –î–ª—è –∫–æ–≥–æ |
|----------|----------|
| `PATCH /auth/push-token` | –ö–ª–∏–µ–Ω—Ç (–º–æ–±–∏–ª—å–Ω–æ–µ) |
| `PATCH /medics/push-token` | –ú–µ–¥–∏–∫ (–º–æ–±–∏–ª—å–Ω–æ–µ) |

---

## 4. Admin Panel ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π

**–°—Ç–∞—Ç—É—Å:** –ë—ç–∫–µ–Ω–¥ ‚úÖ –ø–æ–ª–Ω–æ—Å—Ç—å—é | web/ ‚ùå –Ω–µ—Ç | web-medic/ ‚ùå –Ω–µ—Ç

–ë—ç–∫–µ–Ω–¥ —É–∂–µ –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä admin-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤. –ù—É–∂–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å (`admin/`).

### –ú–µ–¥–∏–∫–∏
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `GET /medics/admin/pending` | –°–ø–∏—Å–æ–∫ –º–µ–¥–∏–∫–æ–≤ –æ–∂–∏–¥–∞—é—â–∏—Ö –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é |
| `PATCH /medics/admin/:id/verify` | –û–¥–æ–±—Ä–∏—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é |
| `PATCH /medics/admin/:id/block` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å / —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–∏–∫–∞ |

### –ö–ª–∏–µ–Ω—Ç—ã
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `PATCH /auth/admin/users/:id/block` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å / —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ |

### –ó–∞–∫–∞–∑—ã
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `GET /orders/admin/all` | –í—Å–µ –∑–∞–∫–∞–∑—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (—Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞, –º–µ–¥–∏–∫, –∫–ª–∏–µ–Ω—Ç) |
| `PATCH /orders/admin/:id/cancel` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –ª—é–±–æ–π –∑–∞–∫–∞–∑ |

### –£—Å–ª—É–≥–∏ (Services CRUD)
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `POST /services` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —É—Å–ª—É–≥—É |
| `PATCH /services/:id` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª—É–≥—É (—Ü–µ–Ω–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å) |
| `DELETE /services/:id` | –£–¥–∞–ª–∏—Ç—å —É—Å–ª—É–≥—É |

> –î–ª—è –≤—Å–µ—Ö admin-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –Ω—É–∂–µ–Ω `AdminGuard` (–∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-admin-key`).

---

## 5. –ú–µ–ª–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–ø—É—â–µ–Ω—ã

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|-------|------------|--------|------------|
| `GET /services/:id` | GET | web/ | ‚ùå | –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —É—Å–ª—É–≥–∏ (–ø—É–±–ª–∏—á–Ω—ã–π) |
| `GET /health` | GET | –æ–±–∞ | ‚ùå | Health-check —Å–µ—Ä–≤–µ—Ä–∞ |

---

## –ò—Ç–æ–≥ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|-----------|--------|--------|
| ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ | Telegram Chat ID –Ω–∞ –±—ç–∫–µ–Ω–¥–µ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚Äî —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω, web-medic —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î |
| ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ | Nearby medics –Ω–∞ –∫–∞—Ä—Ç–µ | `GET /medics/nearby` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `/order/location` |
| ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ | –ö–ª–∏–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ | `PATCH /orders/:id/status` ‚Üí DONE –¥–æ–±–∞–≤–ª–µ–Ω –≤ `/orders/[id]` |
| ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ | –°–∫–∏–¥–∫–∞ 10% –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ confirm-—Å—Ç—Ä–∞–Ω–∏—Ü–µ |
| ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ | Web Push (VAPID) | sw.js + webPush.ts + WebPushInit –≤ –æ–±–æ–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. VAPID env vars –Ω–∞ Railway ‚úÖ |
| üü¢ –ù–∏–∑–∫–∏–π | Admin Panel | –û—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `admin/` |
| üü¢ –ù–∏–∑–∫–∏–π | Services CRUD | –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∞–º–∏ –≤ admin/ |
