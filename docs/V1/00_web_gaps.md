# V1 ‚Äî –ß—Ç–æ –µ—Å—Ç—å –≤ –±—ç–∫–µ–Ω–¥–µ, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –≤–µ–±–∞—Ö

> –ë—ç–∫–µ–Ω–¥ —É–∂–µ –≥–æ—Ç–æ–≤. –ù–∏–∂–µ ‚Äî —Å–ø–∏—Å–æ–∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—ç–∫–µ–Ω–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç,
> –Ω–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`web/` –∏ `web-medic/`) –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç.

---

## 1. Web Push (VAPID) ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä

**–°—Ç–∞—Ç—É—Å:** –ë—ç–∫–µ–Ω–¥ ‚úÖ | web/ üü° —á–∞—Å—Ç–∏—á–Ω–æ | web-medic/ üü° —á–∞—Å—Ç–∏—á–Ω–æ

–ë—ç–∫–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Web Push —á–µ—Ä–µ–∑ VAPID.
–§—Ä–æ–Ω—Ç —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `lib/webPush.ts` –∏ `public/sw.js`, –Ω–æ –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ:

### web/ (–∫–ª–∏–µ–Ω—Ç)
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –°—Ç–∞—Ç—É—Å | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|-------|--------|------------|
| `GET /auth/vapid-public-key` | GET | üü° —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ webPush.ts | –ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π VAPID –∫–ª—é—á |
| `POST /auth/web-push-subscription` | POST | üü° —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ webPush.ts | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ |
| `DELETE /auth/web-push-subscription` | DELETE | üü° —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ webPush.ts | –û—Ç–ø–∏—Å–∞—Ç—å—Å—è |

**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- `VAPID_PUBLIC_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ Railway (env var)
- Service Worker (`public/sw.js`) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `push` —Å–æ–±—ã—Ç–∏–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–†–∞–∑—Ä–µ—à–∏—Ç—å" –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### web-medic/ (–º–µ–¥–∏–∫)
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –°—Ç–∞—Ç—É—Å | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|-------|--------|------------|
| `GET /auth/vapid-public-key` | GET | üü° —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ webPush.ts | –ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π VAPID –∫–ª—é—á |
| `POST /medics/web-push-subscription` | POST | üü° —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ webPush.ts | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –º–µ–¥–∏–∫–∞ |
| `DELETE /medics/web-push-subscription` | DELETE | üü° —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ webPush.ts | –û—Ç–ø–∏—Å–∞—Ç—å—Å—è |

**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- Service Worker –≤ `public/sw.js` (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–ª—è web-medic —Ç–æ–∂–µ)
- –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Å–∏—Å—Ç–µ–º—É ‚Äî –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## 2. Telegram Chat ID ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

**–°—Ç–∞—Ç—É—Å:** –ë—ç–∫–µ–Ω–¥ ‚ùå –Ω–µ—Ç | web-medic/ üü° —Ç–æ–ª—å–∫–æ –≤ localStorage

–°–µ–π—á–∞—Å `telegram_chat_id` —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `localStorage` –±—Ä–∞—É–∑–µ—Ä–∞ –º–µ–¥–∏–∫–∞.
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç: –µ—Å–ª–∏ –º–µ–¥–∏–∫ –æ—Ç–∫—Ä—ã–ª –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –æ—á–∏—Å—Ç–∏–ª –¥–∞–Ω–Ω—ã–µ ‚Äî chat_id –ø–æ—Ç–µ—Ä—è–Ω,
–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–¥—É—Ç.

**–ù—É–∂–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –±—ç–∫–µ–Ω–¥–µ—Ä–∞ –¥–æ–±–∞–≤–∏—Ç—å:**

```
PATCH /medics/telegram-chat-id
Body: { "chatId": "123456789" }
Guard: MedicAuthGuard
```

–ò –≤ —Ç–∞–±–ª–∏—Ü–µ `medics`:
```sql
ALTER TABLE medics ADD COLUMN telegram_chat_id VARCHAR(64) DEFAULT NULL;
```

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ web-medic:**
- –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ Telegram ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å `chatId` –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ë—ç–∫–µ–Ω–¥ —Å–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–¥–∏–∫—É –ø—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ (–±–µ–∑ —É—á–∞—Å—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞)

---

## 3. Expo Push Token ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–°—Ç–∞—Ç—É—Å:** –ë—ç–∫–µ–Ω–¥ ‚úÖ | web/ ‚ûñ –Ω–µ –Ω—É–∂–Ω–æ | web-medic/ ‚ûñ –Ω–µ –Ω—É–∂–Ω–æ

–≠—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –±—É–¥—É—â–µ–≥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (React Native / Expo).
–í –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –î–ª—è –∫–æ–≥–æ |
|----------|----------|
| `PATCH /auth/push-token` | –ö–ª–∏–µ–Ω—Ç (–º–æ–±–∏–ª—å–Ω–æ–µ) |
| `PATCH /medics/push-token` | –ú–µ–¥–∏–∫ (–º–æ–±–∏–ª—å–Ω–æ–µ) |

---

## 4. Admin Panel ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π

**–°—Ç–∞—Ç—É—Å:** –ë—ç–∫–µ–Ω–¥ ‚úÖ –ø–æ–ª–Ω–æ—Å—Ç—å—é | web/ ‚ùå –Ω–µ—Ç | web-medic/ ‚ùå –Ω–µ—Ç

–ë—ç–∫–µ–Ω–¥ —É–∂–µ –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä admin-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤. –ù—É–∂–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å (`admin/`).

### –ú–µ–¥–∏–∫–∏
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `GET /medics/admin/pending` | –°–ø–∏—Å–æ–∫ –º–µ–¥–∏–∫–æ–≤ –æ–∂–∏–¥–∞—é—â–∏—Ö –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é |
| `PATCH /medics/admin/:id/verify` | –û–¥–æ–±—Ä–∏—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é |
| `PATCH /medics/admin/:id/block` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å / —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–∏–∫–∞ |

### –ö–ª–∏–µ–Ω—Ç—ã
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `PATCH /auth/admin/users/:id/block` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å / —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ |

### –ó–∞–∫–∞–∑—ã
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `GET /orders/admin/all` | –í—Å–µ –∑–∞–∫–∞–∑—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (—Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞, –º–µ–¥–∏–∫, –∫–ª–∏–µ–Ω—Ç) |
| `PATCH /orders/admin/:id/cancel` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –ª—é–±–æ–π –∑–∞–∫–∞–∑ |

### –£—Å–ª—É–≥–∏ (Services CRUD)
| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `POST /services` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —É—Å–ª—É–≥—É |
| `PATCH /services/:id` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª—É–≥—É (—Ü–µ–Ω–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å) |
| `DELETE /services/:id` | –£–¥–∞–ª–∏—Ç—å —É—Å–ª—É–≥—É |

> –î–ª—è –≤—Å–µ—Ö admin-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –Ω—É–∂–µ–Ω `AdminGuard` (–∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-admin-key`).

---

## 5. –ú–µ–ª–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–ø—É—â–µ–Ω—ã

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|-------|------------|--------|------------|
| `GET /services/:id` | GET | web/ | ‚ùå | –î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —É—Å–ª—É–≥–∏ (–ø—É–±–ª–∏—á–Ω—ã–π) |
| `GET /health` | GET | –æ–±–∞ | ‚ùå | Health-check —Å–µ—Ä–≤–µ—Ä–∞ |

---

## –ò—Ç–æ–≥ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–¥–∞—á–∞ | –ß—Ç–æ –Ω—É–∂–Ω–æ |
|-----------|--------|-----------|
| üî¥ –í—ã—Å–æ–∫–∏–π | Telegram Chat ID –Ω–∞ –±—ç–∫–µ–Ω–¥–µ | –ü–æ–ø—Ä–æ—Å–∏—Ç—å –±—ç–∫–µ–Ω–¥–µ—Ä–∞ –¥–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç + –ø–æ–ª–µ –≤ –ë–î |
| üü° –°—Ä–µ–¥–Ω–∏–π | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Web Push —Ä–∞–±–æ—Ç—É | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å VAPID env vars, –¥–æ–±–∞–≤–∏—Ç—å sw.js –≤ web-medic |
| üü¢ –ù–∏–∑–∫–∏–π | Admin Panel | –û—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `admin/` |
| üü¢ –ù–∏–∑–∫–∏–π | Services CRUD | –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∞–º–∏ –≤ admin/ |
